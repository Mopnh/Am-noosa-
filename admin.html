<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Ù„ÙˆØ­Ø© Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª Ø§Ù„Ù…Ø·ÙˆØ±Ø© Ø£Ù… Ø§Ù„Ø­Ø§Ø±Ø« ğŸ€ğŸ’</title>
<!-- Ù†ÙØ³ CSS Ø§Ù„Ø°ÙŠ Ø£Ø±Ø³Ù„ØªÙ‡ Ø³Ø§Ø¨Ù‚Ù‹Ø§ -->
<style>
/* ... Ø§Ø­ØªÙØ¸ Ø¨ÙƒÙ„ Ø³ØªØ§ÙŠÙ„ admin Ø§Ù„Ø£ØµÙ„ÙŠ ÙƒÙ…Ø§ Ù‡Ùˆ ... */
</style>
</head>
<body>

<header>
<h1>Ù„ÙˆØ­Ø© Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª Ø§Ù„Ù…Ø·ÙˆØ±Ø© Ø£Ù… Ø§Ù„Ø­Ø§Ø±Ø« ğŸ€ğŸ’</h1>
</header>

<!-- Ù†Ø§ÙØ°Ø© ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± -->
<div class="modal-bg" id="passwordModal">
  <div class="modal">
    <h2>Ø£Ø¯Ø®Ù„ ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± Ù„Ù„ÙˆØµÙˆÙ„ Ù„Ù„ÙˆØ­Ø© Ø§Ù„Ø¥Ø¯Ø§Ø±Ø©</h2>
    <input type="password" id="adminPassword" placeholder="ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±">
    <button id="loginBtn">Ø¯Ø®ÙˆÙ„</button>
  </div>
</div>

<!-- Ù†Ù…ÙˆØ°Ø¬ Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù…Ù†ØªØ¬ -->
<form id="addProductForm">
  <input type="text" id="productName" placeholder="Ø§Ø³Ù… Ø§Ù„Ù…Ù†ØªØ¬" required>
  <input type="text" id="productImage" placeholder="Ø±Ø§Ø¨Ø· ØµÙˆØ±Ø© Ø§Ù„Ù…Ù†ØªØ¬" required>
  <button type="submit">Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù…Ù†ØªØ¬</button>
</form>

<!-- Ø¹Ø±Ø¶ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª -->
<div class="products" id="productsList"></div>

<script type="module">
import { db, ref, push, onValue, remove } from './firebase.js';

const PASSWORD = "AmHarith2026";

const modal = document.getElementById("passwordModal");
const loginBtn = document.getElementById("loginBtn");
const passwordInput = document.getElementById("adminPassword");

const form = document.getElementById("addProductForm");
const nameInput = document.getElementById("productName");
const imageInput = document.getElementById("productImage");
const productsList = document.getElementById("productsList");

form.style.display = "none";
productsList.style.display = "none";

loginBtn.addEventListener("click", () => {
  if(passwordInput.value === PASSWORD){
    modal.style.display = "none";
    form.style.display = "flex";
    productsList.style.display = "grid";
    loadProducts();
  }else{
    alert("ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± Ø®Ø§Ø·Ø¦Ø©!");
    passwordInput.value = "";
  }
});

function loadProducts(){
  onValue(ref(db,"products"), snapshot => {
    productsList.innerHTML = "";
    snapshot.forEach(child => {
      const prod = child.val();
      const card = document.createElement("div");
      card.className = "card";
      card.innerHTML = `
        <img src="${prod.image}">
        <div class="overlay">
          <h3>${prod.name}</h3>
          <button class="delete-btn">Ø­Ø°Ù</button>
        </div>`;
      card.querySelector(".delete-btn").onclick = () => remove(ref(db,"products/"+child.key));
      productsList.appendChild(card);
    });
  });
}

form.addEventListener("submit", e => {
  e.preventDefault();
  push(ref(db,"products"), { name: nameInput.value, image: imageInput.value });
  nameInput.value = "";
  imageInput.value = "";
});
</script>

</body>
</html>
